/*
 * URL Utils - v1.11 - 9/10/2009
 * http://benalman.com/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Licensed under the MIT license
 * http://benalman.com/about/license/
 */
(function(jQuery){var M,q={},z,i=this,u=true,J=false,F="onhashchange" in i,a=Array.prototype.slice,j=document.location,E,d,b,x,v,e,C,I,p="urlInternal",L="urlExternal",y="queryString",G="fragment",H="update",f="passQueryString",w="passFragment",c="fragmentChange",o="hashchange."+c,h,g;function B(O){return typeof O==="string"}function l(O){return typeof O==="object"}function m(){var O=a.call(arguments),P=O.shift();return function(){return P.apply(this,O.concat(a.call(arguments)))}}function k(){return j.href.replace(/^[^#]*#?/,"")}jQuery.urlTagAttrList=E=function(O){return jQuery.extend(q,O)};E({a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"});function r(O){var P=O.nodeName;return P?q[P.toLowerCase()]:""}jQuery.urlInternalHost=d=function(Q){Q=Q?"(?:"+Q+"\\.)?":"";var P=new RegExp("^"+Q+"(.*)","i"),O="^"+j.protocol+"//"+j.hostname.replace(P,Q+"jQuery1")+(j.port?":"+j.port:"")+"/";return b(O)};jQuery.urlInternalRegExp=b=function(O){if(O){M=B(O)?new RegExp(O,"i"):O}return M};d("www");jQuery.isUrlInternal=x=function(O){if(!O){return z}if(M.test(O)){return u}if(/^https?:\/\//i.test(O)){return J}if(/^(?:#|[a-z\d.-]+:)/i.test(O)){return z}return u};jQuery.isUrlExternal=v=function(O){var P=x(O);return typeof P==="boolean"?!P:P};e=function(P,O){return this.filter(":"+P+(O?"("+O+")":""))};jQuery.fn[p]=m(e,p);jQuery.fn[L]=m(e,L);C=function(S,R,Q,P){var O=P[3]||r(R);return O?!!S(jQuery(R).attr(O)):J};jQuery.expr[":"][p]=m(C,x);jQuery.expr[":"][L]=m(C,v);function K(Q,R,P,O){var S;if(B(P)||l(P)){return n(R,P,O,Q)}else{if(l(R)){return jQuery.param(R)}else{if(B(R)){return D(R,P,Q)}else{S=Q?k():j.search;return D(S,R,Q)}}}}jQuery[y]=m(K,0);jQuery[G]=m(K,1);function N(){var O,S,R,Q=a.call(arguments),P=Q.shift();if(B(Q[1])||l(Q[1])){O=Q.shift()}S=Q.shift();R=Q.shift();return this.each(function(){var V=jQuery(this),T=O||r(this),U=T&&V.attr(T)||"";U=K(P,U,S,R);V.attr(T,U)})}jQuery.fn[y]=m(N,0);jQuery.fn[G]=m(N,1);function A(){var Q=a.call(arguments),P=Q.shift(),O=Q.shift(),R=K(P);if(jQuery.isFunction(Q[0])){R=Q.shift()(R)}else{if(jQuery.isArray(Q[0])){jQuery.each(Q.shift(),function(T,S){delete R[S]})}}return K(P,O,R,Q.shift())}jQuery[f]=m(A,0);jQuery[w]=m(A,1);function t(){var O,Q=a.call(arguments),P=Q.shift();if(B(Q[0])){O=Q.shift()}return this.each(function(){var T=jQuery(this),R=O||r(this),S=R&&T.attr(R)||"";S=A.apply(this,[P,S].concat(Q));T.attr(R,S)})}jQuery.fn[f]=m(t,0);jQuery.fn[w]=m(t,1);function D(U,T,Q){var P,W,S,V={},R={"null":null,"true":u,"false":J},O=decodeURIComponent,X=Q?/^.*[#]/:/^.*[?]|#.*jQuery/g;U=U.replace(X,"").replace(/\+/g," ").split("&");while(U.length){P=U.shift().split("=");W=O(P[0]);if(P.length===2){S=O(P[1]);if(T){if(S&&!isNaN(S)){S=Number(S)}else{if(S==="undefined"){S=z}else{if(R[S]!==z){S=R[S]}}}}if(jQuery.isArray(V[W])){V[W].push(S)}else{if(V[W]!==z){V[W]=[V[W],S]}else{V[W]=S}}}else{if(W){V[W]=T?z:""}}}return V}function n(O,Q,T,P){var U,W=P?/^([^#]*)[#]?(.*)jQuery/:/^([^#?]*)[?]?([^#]*)(#?.*)/,S=O.match(W),V=D(S[2],0,P),R=S[3]||"";if(B(Q)){Q=D(Q,0,P)}if(T===2){U=Q}else{if(T===1){U=jQuery.extend({},Q,V)}else{U=jQuery.extend({},V,Q)}}U=jQuery.param(U);return S[1]+(P?"#":U||!S[1]?"?":"")+U+R}jQuery.setFragment=I=function(P,O){var Q=l(P)?K(u,P):(P||"").replace(/^#/,"");Q=P?n("#"+k(),"#"+Q,O,1):"#";j.href=j.href.replace(/#.*jQuery/,"")+Q};jQuery[c]=function(O){if(O===u){O=100}function P(){var R=jQuery.Event(c);R[G]=k();jQuery(document).trigger(R)}F&&jQuery(i).unbind(o);h&&clearTimeout(h);h=null;if(typeof O==="number"){if(F){jQuery(i).bind(o,P)}else{g=k();if(jQuery.isFunction(s)){s=s()}(function Q(){var S=k(),R=s[G](g);if(S!==g){s[H](S,R);g=S;P()}else{if(R!==g){I(R,2)}}h=setTimeout(Q,O<0?0:O)})()}}};function s(){var O,P=jQuery.browser,Q={};Q[H]=Q[G]=function(R){return R};if(P.msie&&P.version<8){Q[H]=function(T,R){var S=O.document;if(T!==R){S.open();S.close();S.location.hash="#"+T}};Q[G]=function(){return O.document.location.hash.replace(/^#/,"")};O=jQuery("<iframe/>").hide().appendTo("body").get(0).contentWindow;Q[H](k())}return Q}})(jQuery);